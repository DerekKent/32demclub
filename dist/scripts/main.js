"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_router=require("~/router"),_router2=_interopRequireDefault(_router),_appApp=require("~/app/app"),_appApp2=_interopRequireDefault(_appApp),EXTERNAL=/^((f|ht)tps?:)?\/\//,MAILTO=/^mailto:(.+)/,App=function e(){_classCallCheck(this,e),this.router=_router2["default"],this.view=_appApp2["default"],_backbone2["default"].history.start({hashChange:!1,pushState:!0}),document.addEventListener("click",function(e){if(!e.metaKey&&1===e.which){var t=e.target;if(e.path instanceof Array)for(var a=0,r=e.path.length;r>a;a++)if(e.path[a]instanceof HTMLAnchorElement){t=e.path[a];break}var p=t.getAttribute("href");if(p&&"#"!==p.charAt(0)&&!e.defaultPrevented&&!MAILTO.test(p))if(e.preventDefault(),EXTERNAL.test(p))window.open(p,"_blank");else{var n=!0;t.getAttribute("data-trigger")===!1&&(n=!1),_router2["default"].navigate(p,{trigger:n})}}})},app=new App;exports["default"]=app,module.exports=exports["default"];